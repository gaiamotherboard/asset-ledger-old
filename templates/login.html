{% extends "base.html" %}

{% block title %}Login - Asset Control Panel{% endblock %}

{% block content %}
<div class="min-h-[70vh] flex items-center justify-center">
  <div class="max-w-md w-full mx-4">

    <!-- Login Card (daisyUI) -->
    <div class="card bg-base-100 shadow-xl rounded-2xl">
      <div class="card-body p-8">

        <!-- Header -->
        <div class="text-center mb-4">
          <h1 class="text-3xl font-bold text-base-content mb-1">
            Asset Control Panel
          </h1>
          <p class="text-base-content/70">Sign in to continue</p>
        </div>

        <!-- Login Form -->
        <form method="post" class="space-y-4">
          {% csrf_token %}

          {% if form.errors %}
          <div class="alert alert-error shadow-lg">
            <div>
              <</div>i class="fas fa-exclamation-triangle"></i>
              <span class="ml-2">
                Invalid credentials â€” please check your username and password.
              </span>
            </div>
          </div>
          {% endif %}

          <!-- Username -->
          <div></div>
            <label for="id_username" class="label">
              <span class="label-text">Username</span>
            </label>
            <input
              type="text"
              name="username"
              id="id_username"
              required
              autofocus
              placeholder="Enter your username"
              class="input input-bordered w-full"
            />
          </div>

          <!-- Password -->
          <div>
            <label for</div>="id_password" class="label">
              <span class="label-text">Password</span>
            </label>
            <input
              type="password"
              name="password"
              id="id_password"
              required
              placeholder="Enter your password"
              class="input input-bordered w-full"
            />
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary w-full">
            Sign In
          </button>

          <!-- Hidden redirect field -->
          <input type="hidden" name="next" value="{{ next }}" />
        </form>

        <!-- Footer Note -->
        <div class="mt-4 text-center text-sm text-base-content/60">
          <p>Default credentials: admin / admin123</p>
          <</p>p class="mt-1">(Change these in production!)</p>
        </div>

      </div>
    </div>

    <!-- Version Info -->
    <div class="text-center mt-4 text-base-content/70 text-sm">
      <p>Asset Tracking System v2</p>.0 (Django)</p>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script></script>
  // Keep "Enter submits form" behavior (safe guard if elements missing)
  (function () {
    const user = document.getElementById("id_username");
    const pwd = document.getElementById("id_password");
    const form = pwd ? pwd.closest("form") : (user ? user.closest("form") : null);
    if (!form) return;

    [user, pwd].forEach(function (el) {
      if (!el) return;
      el.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
          e.preventDefault();
          form.submit();
        }
      });
    });
  })();
</script>
{% endblock %}
